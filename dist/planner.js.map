{"version":3,"file":"planner.js","mappings":";;;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;;;;;;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa,cAAc;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,QAAQ,uFAAuF;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrJA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ,EAAE,MAAM,EAAE,OAAO;AAC3C;AACA;AACA;;;;;;;;;;;;;;;;ACf+C;AACR;AAChC;AACP;AACA,gCAAgC,wDAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC,gDAAQ;AACzC,uCAAuC,gDAAQ;AAC/C,uCAAuC,gDAAQ;AAC/C,qCAAqC,gDAAQ;AAC7C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1EO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvBqD;AACD;AAC7C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iEAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA,uBAAuB,GAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iEAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,aAAa;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iEAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAY;AACxC,yCAAyC;AACzC,oCAAoC,YAAY;AAChD,qCAAqC,wBAAwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AChJkD;AACM;AACX;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,gCAAgC,gEAAe;AAC/C;AACA;AACA,oBAAoB,8DAAc;AAClC,oDAAoD,uBAAuB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,sDAAW;AACzG;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC1MkD;AAC3C;AACP;AACA;AACA;AACA;AACA,wBAAwB,8DAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACjBkD;AAClD;AACA;AACA,4BAA4B,8DAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,oBAAoB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8DAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1EO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5ByC;AAClC;AACP;AACA,mBAAmB,kDAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAS;AAChC,uBAAuB,kDAAS;AAChC,uBAAuB,kDAAS;AAChC,uBAAuB,kDAAS;AAChC,uBAAuB,kDAAS;AAChC,uBAAuB,kDAAS;AAChC;AACA;AACA;AACA;;;;;;UCnBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNgE;AACwB;AAC3B;AACP;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,eAAe,eAAe;AACtF,0IAA0I;AAC1I;AACA;AACA,8BAA8B,+DAAa;AAC3C,iCAAiC,sEAAgB;AACjD;AACA;AACA,6BAA6B,yEAAiB;AAC9C,oBAAoB,iGAA0B;AAC9C;AACA;AACA,gC","sources":["webpack:///../build/common/common.js","webpack:///../build/common/linked_list.js","webpack:///../build/common/text_width.js","webpack:///../build/eisenhower/eisenhower_matrix_task_editor.js","webpack:///../build/eisenhower/indexed_tasks.js","webpack:///../build/eisenhower/task_element.js","webpack:///../build/eisenhower/task_zone.js","webpack:///../build/misc/github_page_opener.js","webpack:///../build/misc/style_switcher.js","webpack:///../build/tasks/basic_task.js","webpack:///../build/tasks/basic_task_provider.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///../build/main.js"],"sourcesContent":["export function getElementById(id) {\n    const element = document.getElementById(id);\n    if (element === null || element === undefined) {\n        throw new MediaError;\n    }\n    return element;\n}\nclass TemplateCloner {\n    constructor() {\n        this.cachedTemplates = new Map;\n    }\n    cloneTemplateById(templateId) {\n        const template = this.getTemplate(templateId);\n        return this.cloneTemplate(template);\n    }\n    getTemplate(templateId) {\n        if (this.cachedTemplates.has(templateId)) {\n            return this.getTemplateFromCache(templateId);\n        }\n        else {\n            return this.getAndCacheTemplateFromDocument(templateId);\n        }\n    }\n    getTemplateFromCache(templateId) {\n        return this.cachedTemplates.get(templateId);\n    }\n    getAndCacheTemplateFromDocument(templateId) {\n        const template = getElementById(templateId);\n        this.cachedTemplates.set(templateId, template);\n        return template;\n    }\n    cloneTemplate(template) {\n        const clone = template.cloneNode(true);\n        clone.id = \"\";\n        clone.classList.remove(TemplateCloner.templateClass);\n        return clone;\n    }\n}\nTemplateCloner.templateClass = \"template\";\nvar templateCloner = new TemplateCloner;\nexport function cloneTemplateById(id) {\n    return templateCloner.cloneTemplateById(id);\n}\n//# sourceMappingURL=common.js.map","class LinkedListItem {\n    constructor(value) {\n        this.value = value;\n    }\n    getNext() {\n        return this.next;\n    }\n    setNext(next) {\n        this.next = next;\n    }\n    insertAfterSelf(next) {\n        next.setNext(this.next);\n        this.next = next;\n    }\n    getValue() {\n        return this.value;\n    }\n    contains(value) {\n        return this.value == value;\n    }\n}\nexport class BasicLinkedList {\n    constructor() {\n        this.head = undefined;\n    }\n    pushBack(value) {\n        var _a;\n        const newItem = new LinkedListItem(value);\n        if (this.head === undefined) {\n            this.head = newItem;\n        }\n        else {\n            (_a = this.getBackItem()) === null || _a === void 0 ? void 0 : _a.setNext(newItem);\n        }\n    }\n    pushFront(value) {\n        const newItem = new LinkedListItem(value);\n        this.insertAsFirst(newItem);\n    }\n    pop(value) {\n        var _a;\n        if ((_a = this.head) === null || _a === void 0 ? void 0 : _a.contains(value)) {\n            this.popFront();\n        }\n        else {\n            this.popFromNotFirst(value);\n        }\n    }\n    popFront() {\n        var _a;\n        this.head = (_a = this.head) === null || _a === void 0 ? void 0 : _a.getNext();\n    }\n    popFromNotFirst(value) {\n        const prev = this.findItemWithNextValue(value);\n        const removed = prev === null || prev === void 0 ? void 0 : prev.getNext();\n        prev === null || prev === void 0 ? void 0 : prev.setNext(removed === null || removed === void 0 ? void 0 : removed.getNext());\n    }\n    clear() {\n        this.head = undefined;\n    }\n    front() {\n        var _a;\n        return (_a = this.head) === null || _a === void 0 ? void 0 : _a.getValue();\n    }\n    back() {\n        var _a;\n        return (_a = this.getBackItem()) === null || _a === void 0 ? void 0 : _a.getValue();\n    }\n    getBackItem() {\n        let last = undefined;\n        this.forEachItem(item => { last = item; return true; });\n        return last;\n    }\n    contains(value) {\n        return this.findItemWithValue(value) !== undefined;\n    }\n    insertAfter(value, after) {\n        const newItem = new LinkedListItem(value);\n        const item = this.findItemWithValue(after);\n        item === null || item === void 0 ? void 0 : item.insertAfterSelf(newItem);\n    }\n    insertBefore(value, before) {\n        const newItem = new LinkedListItem(value);\n        if (this.head === undefined || this.head.contains(before)) {\n            this.insertAsFirst(newItem);\n        }\n        else {\n            this.insertBeforeNotFirst(newItem, before);\n        }\n    }\n    insertAsFirst(newItem) {\n        newItem.setNext(this.head);\n        this.head = newItem;\n    }\n    insertBeforeNotFirst(newItem, before) {\n        let prev = this.findItemWithNextValue(before);\n        prev === null || prev === void 0 ? void 0 : prev.insertAfterSelf(newItem);\n    }\n    findItemWithValue(value) {\n        return this.findItem(item => item.contains(value));\n    }\n    findItemWithNextValue(value) {\n        return this.findItem(item => { var _a; return (_a = item.getNext()) === null || _a === void 0 ? void 0 : _a.contains(value); });\n    }\n    findItem(condition) {\n        let foundItem = undefined;\n        this.forEachItem((item) => {\n            if (condition(item)) {\n                foundItem = item;\n                return false;\n            }\n            return true;\n        });\n        return foundItem;\n    }\n    forEach(callbackfn) {\n        this.forEachItem(item => callbackfn(item.getValue()));\n    }\n    forEachItem(callbackfn) {\n        if (this.head === undefined)\n            return;\n        this.doForEachItem(callbackfn);\n    }\n    doForEachItem(callbackfn) {\n        let item = this.head;\n        do {\n            const cont = callbackfn(item);\n            if (cont === false)\n                break;\n            item = item.getNext();\n        } while (item);\n    }\n    iterate() {\n        return new BasicLinkedListIterator(this.head);\n    }\n}\nclass BasicLinkedListIterator {\n    constructor(head) {\n        this.current = head;\n    }\n    hasNext() {\n        return this.current !== undefined;\n    }\n    getNext() {\n        const value = this.current.getValue();\n        this.current = this.current.getNext();\n        return value;\n    }\n}\n//# sourceMappingURL=linked_list.js.map","// with help from https://stackoverflow.com/a/21015393/8665933\nvar testingCanvas = document.createElement('canvas');\nexport function getTextWidth(text, styledElement) {\n    let ctx = testingCanvas.getContext('2d');\n    ctx.font = getFont(styledElement);\n    return ctx.measureText(text).width;\n}\nfunction getFont(elem) {\n    let css = window.getComputedStyle(elem);\n    let weight = css.getPropertyValue('font-weight');\n    let size = css.getPropertyValue('font-size');\n    let family = css.getPropertyValue('font-family');\n    let font = `${weight} ${size} ${family}`;\n    return font;\n}\n//# sourceMappingURL=text_width.js.map","import { IndexedTasks } from \"./indexed_tasks\";\nimport { TaskZone } from \"./task_zone\";\nexport class EisenhowerMatrixTaskEditor {\n    constructor(taskProvider) {\n        this.managedTasks = new IndexedTasks;\n        this.zones = new Map;\n        this.taskProvider = taskProvider;\n        this.initTasks();\n        this.initZones();\n        this.displayInitializedTasks();\n    }\n    initTasks() {\n        const tasks = this.taskProvider.restoreTasks();\n        this.indexRestoredTasks(tasks);\n    }\n    indexRestoredTasks(tasks) {\n        tasks.forEach((task) => {\n            this.managedTasks.addTask(task);\n        });\n    }\n    initZones() {\n        this.zones.set('do', new TaskZone(\"task_zone_do\", 'do'));\n        this.zones.set('schedule', new TaskZone(\"task_zone_schedule\", 'schedule'));\n        this.zones.set('delegate', new TaskZone(\"task_zone_delegate\", 'delegate'));\n        this.zones.set('delete', new TaskZone(\"task_zone_delete\", 'delete'));\n        this.zones.forEach((zone) => {\n            this.addCategoryChangeProvider(zone);\n            this.addNewTaskProvider(zone);\n        });\n    }\n    displayInitializedTasks() {\n        this.managedTasks.forEach((task, index) => {\n            this.displayTask(task, index);\n        });\n    }\n    displayTask(task, index) {\n        const zone = this.zones.get(task.getSection());\n        zone === null || zone === void 0 ? void 0 : zone.addTask(index, task);\n    }\n    addCategoryChangeProvider(catChangeProvider) {\n        catChangeProvider.setCategoryChangeCallback((taskId, newCat, newIndex) => this.changeTaskCategory(taskId, newCat, newIndex));\n    }\n    addNewTaskProvider(newTaskProvider) {\n        newTaskProvider.setInitializeTaskCallback(() => this.initTaskCallback());\n        newTaskProvider.setFinalizeTaskCallback(task => this.finalizeTaskCallback(task));\n    }\n    changeTaskCategory(taskId, newCategory, newIndex) {\n        const task = this.managedTasks.getTask(taskId);\n        this.removeTaskFromZone(taskId, task.getSection());\n        this.incrementIndicesToFreeSpaceForInsertedTask(newCategory, newIndex);\n        task.setSection(newCategory);\n        task.setOrderIndex(newIndex);\n        console.log(`New index: ${newIndex}`);\n        this.displayTask(task, taskId);\n    }\n    incrementIndicesToFreeSpaceForInsertedTask(category, startIndex) {\n        this.managedTasks.forEach((task) => {\n            if (task.getSection() === category && task.getOrderIndex() >= startIndex) {\n                task.setOrderIndex(task.getOrderIndex() + 1);\n            }\n        });\n    }\n    removeTaskFromZone(taskId, section) {\n        var _a;\n        (_a = this.zones.get(section)) === null || _a === void 0 ? void 0 : _a.removeTask(taskId);\n    }\n    initTaskCallback() {\n        return this.taskProvider.createNewTask();\n    }\n    finalizeTaskCallback(task) {\n        const id = this.managedTasks.addTask(task);\n        this.displayTask(task, id);\n    }\n}\n//# sourceMappingURL=eisenhower_matrix_task_editor.js.map","export class IndexedTasks {\n    constructor() {\n        this.tasks = new Map;\n        this.lastTaskIndex = 0;\n    }\n    addTask(task) {\n        const newTaskIndex = ++this.lastTaskIndex;\n        this.tasks.set(newTaskIndex, task);\n        return newTaskIndex;\n    }\n    getTask(index) {\n        return this.tryGetTask(index);\n    }\n    tryGetTask(index) {\n        return this.tasks.get(index);\n    }\n    removeTask(index) {\n        this.tasks.delete(index);\n    }\n    forEach(callbackfn) {\n        this.tasks.forEach(callbackfn);\n    }\n}\n//# sourceMappingURL=indexed_tasks.js.map","import { cloneTemplateById } from \"../common/common\";\nimport { getTextWidth } from \"../common/text_width\";\nexport class TaskElement {\n    constructor(id, task) {\n        this.id = id;\n        this.task = task;\n        this.element = this.generateElement();\n        const stateInfo = this.generateTaskElementStateInfo();\n        this.switchToState(new DisplayedTaskElement(stateInfo));\n    }\n    generateElement() {\n        const newElement = cloneTemplateById(TaskElement.taskTemplateId);\n        newElement.id = this.getElementIdForTask(this.id);\n        newElement.addEventListener('dblclick', ev => this.handleDblclick(ev));\n        return newElement;\n    }\n    getElementIdForTask(id) {\n        return `task_${id}`;\n    }\n    handleDblclick(event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    getElement() {\n        return this.element;\n    }\n    getTask() {\n        return this.task;\n    }\n    remove() {\n        this.element.remove();\n    }\n    generateTaskElementStateInfo() {\n        return new TaskElemStateInfo(this.id, this.task, this.element);\n    }\n    switchToState(state) {\n        this.state = state;\n        this.state.setSwitchStateCallback(state => this.switchToState(state));\n    }\n}\nTaskElement.taskTemplateId = \"task_template\";\nTaskElement.taskDragType = \"taskid\";\nclass TaskElemStateInfo {\n    constructor(id, task, root) {\n        this.id = id;\n        this.task = task;\n        this.root = root;\n    }\n}\nclass TaskElementState {\n    constructor(taskElemInfo) {\n        this.switchToState = () => { };\n        this.taskElemInfo = taskElemInfo;\n        this.getRoot().innerHTML = \"\";\n    }\n    getId() {\n        return this.taskElemInfo.id;\n    }\n    getRoot() {\n        return this.taskElemInfo.root;\n    }\n    getTask() {\n        return this.taskElemInfo.task;\n    }\n    getElemInfo() {\n        return this.taskElemInfo;\n    }\n    setSwitchStateCallback(callbackfn) {\n        this.switchToState = callbackfn;\n    }\n}\nclass DisplayedTaskElement extends TaskElementState {\n    constructor(taskElemInfo) {\n        super(taskElemInfo);\n        this.element = this.constructElement();\n        this.setupEvents();\n    }\n    constructElement() {\n        const element = cloneTemplateById(DisplayedTaskElement.displayTemplateId);\n        element.innerText = this.getTask().getName();\n        this.getRoot().appendChild(element);\n        return element;\n    }\n    setupEvents() {\n        this.element.addEventListener('dragstart', ev => this.handleDragstart(ev));\n        this.element.addEventListener('dblclick', ev => this.handleDblclick(ev));\n    }\n    handleDragstart(event) {\n        if (event.dataTransfer) {\n            event.dataTransfer.setData(TaskElement.taskDragType, `${this.getId()}`);\n            event.dataTransfer.dropEffect = \"move\";\n        }\n    }\n    handleDblclick(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.switchToState(new EditedTaskElement(this.getElemInfo()));\n    }\n}\nDisplayedTaskElement.displayTemplateId = \"task_display_template\";\nclass EditedTaskElement extends TaskElementState {\n    constructor(taskElemInfo) {\n        super(taskElemInfo);\n        this.input = cloneTemplateById(EditedTaskElement.templateClassId);\n        this.input.value = this.getTask().getName();\n        this.getRoot().appendChild(this.input);\n        this.updateInputSize();\n        this.setupEvents();\n        this.input.focus();\n    }\n    setupEvents() {\n        this.input.addEventListener('keypress', ev => this.stopIfEnter(ev));\n        this.input.addEventListener('keyup', ev => this.cancelIfEscape(ev));\n        this.input.addEventListener('input', ev => this.updateInputSize());\n        this.input.addEventListener('blur', ev => this.stopEditing());\n    }\n    stopIfEnter(event) {\n        if (event.key === \"Enter\") {\n            event.preventDefault();\n            this.stopEditing();\n        }\n    }\n    cancelIfEscape(event) {\n        if (event.code === \"Escape\") {\n            event.preventDefault();\n            this.cancelEditing();\n        }\n    }\n    updateInputSize() {\n        const currentText = this.input.value;\n        const targetWidth = getTextWidth(currentText, this.input);\n        this.input.style.height = `1px`; // Reset height so that it could be reduced\n        this.input.style.width = `${targetWidth}px`;\n        this.input.style.height = `${this.input.scrollHeight}px`;\n    }\n    stopEditing() {\n        this.getTask().setName(this.input.value);\n        this.switchToState(new DisplayedTaskElement(this.getElemInfo()));\n    }\n    cancelEditing() {\n        this.switchToState(new DisplayedTaskElement(this.getElemInfo()));\n    }\n}\nEditedTaskElement.templateClassId = \"task_edit_template\";\n//# sourceMappingURL=task_element.js.map","import { getElementById } from \"../common/common\";\nimport { BasicLinkedList } from \"../common/linked_list\";\nimport { TaskElement } from \"./task_element\";\nexport class BasicPoint {\n    constructor(x, y) {\n        this.x = 0;\n        this.y = 0;\n        this.x = x;\n        this.y = y;\n    }\n}\nexport class ThresholdBox {\n    constructor(rect) {\n        this.rect = rect;\n    }\n    static fromElement(element) {\n        const box = element.getBoundingClientRect();\n        return new ThresholdBox(box);\n    }\n    isAfter(point) {\n        const pointIsBelow = point.y > this.rect.bottom;\n        if (pointIsBelow)\n            return false;\n        const pointIsAbove = point.y < this.rect.top;\n        if (pointIsAbove)\n            return true;\n        return this.isPointAboveDiagonal(point);\n    }\n    isPointAboveDiagonal(point) {\n        const diagonalYAtThreshX = this.getDiagonalYAtX(point.x);\n        const pointAboveDiagonal = point.y < diagonalYAtThreshX;\n        return pointAboveDiagonal;\n    }\n    getDiagonalYAtX(x) {\n        return this.rect.bottom - this.rect.height / this.rect.width * (x - this.rect.left);\n    }\n}\nclass TaskThresholdInfo {\n    constructor(taskId, threshold) {\n        this.taskId = taskId;\n        this.threshold = threshold;\n    }\n    getTaskId() {\n        return this.taskId;\n    }\n    getThreshold() {\n        return this.threshold;\n    }\n}\nexport class TaskZone {\n    constructor(taskBoxElementId, category) {\n        this.tasks = new Map;\n        this.elementOrder = new BasicLinkedList;\n        this.catChangeCallback = () => { };\n        this.category = category;\n        this.root = getElementById(taskBoxElementId);\n        this.contents = this.root.querySelector(`.${TaskZone.contentsClass}`);\n        this.setupEvents();\n    }\n    setupEvents() {\n        this.contents.addEventListener('dragover', ev => this.handleDragover(ev));\n        this.contents.addEventListener('dragend', ev => this.stopDragHighlight());\n        this.contents.addEventListener('dragleave', ev => this.stopDragHighlight());\n        this.contents.addEventListener('drop', ev => this.handleDrop(ev));\n        this.contents.addEventListener('dblclick', ev => this.spawnNewTask(ev));\n    }\n    addTask(id, task) {\n        this.generateElementForTask(id, task);\n        this.displayElement(id);\n    }\n    generateElementForTask(id, task) {\n        const newElement = new TaskElement(id, task);\n        this.tasks.set(id, newElement);\n    }\n    displayElement(id) {\n        const wasInserted = this.tryInsertInMiddle(id);\n        if (wasInserted === false) {\n            this.insertAtEnd(id);\n        }\n    }\n    tryInsertInMiddle(id) {\n        const orderIndex = this.getTask(id).getOrderIndex();\n        const iterator = this.elementOrder.iterate();\n        while (iterator.hasNext()) {\n            const contestedTaskId = iterator.getNext();\n            if (this.shouldInsertBefore(orderIndex, contestedTaskId)) {\n                this.insertBefore(id, contestedTaskId);\n                return true;\n            }\n        }\n        return false;\n    }\n    shouldInsertBefore(index, contestedTaskId) {\n        const contestedOrderIndex = this.getTask(contestedTaskId).getOrderIndex();\n        return index < contestedOrderIndex;\n    }\n    insertBefore(insertedTask, before) {\n        const insertedElement = this.getElementForTask(insertedTask);\n        const beforeElement = this.getElementForTask(before);\n        this.contents.insertBefore(insertedElement, beforeElement);\n        this.elementOrder.insertBefore(insertedTask, before);\n    }\n    insertAtEnd(taskId) {\n        this.elementOrder.pushBack(taskId);\n        const insertedElement = this.getElementForTask(taskId);\n        this.contents.appendChild(insertedElement);\n    }\n    removeTask(id) {\n        var _a;\n        (_a = this.tryGetElementForTask(id)) === null || _a === void 0 ? void 0 : _a.remove();\n        this.tasks.delete(id);\n        this.elementOrder.pop(id);\n    }\n    getTask(id) {\n        return this.tryGetTask(id);\n    }\n    tryGetTask(id) {\n        var _a;\n        return (_a = this.tryGetTaskData(id)) === null || _a === void 0 ? void 0 : _a.getTask();\n    }\n    getElementForTask(id) {\n        return this.tryGetElementForTask(id);\n    }\n    tryGetElementForTask(id) {\n        var _a;\n        return (_a = this.tryGetTaskData(id)) === null || _a === void 0 ? void 0 : _a.getElement();\n    }\n    tryGetTaskData(id) {\n        return this.tasks.get(id);\n    }\n    getTaskData(id) {\n        return this.tryGetTaskData(id);\n    }\n    handleDragover(event) {\n        event.preventDefault();\n        this.root.classList.add(TaskZone.dropHighlightClass);\n    }\n    handleDrop(event) {\n        var _a;\n        this.stopDragHighlight();\n        const msg = (_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.getData(TaskElement.taskDragType);\n        const taskId = this.getTaskId(msg);\n        if (taskId === undefined)\n            return;\n        const dropPos = new BasicPoint(event.pageX, event.pageY);\n        const droppedTaskIndex = this.getIndexForDroppedTask(dropPos);\n        event.preventDefault();\n        console.log(`Received task #${taskId}`);\n        this.catChangeCallback(taskId, this.category, droppedTaskIndex);\n    }\n    stopDragHighlight() {\n        this.root.classList.remove(TaskZone.dropHighlightClass);\n    }\n    getTaskId(message) {\n        if (message === undefined)\n            return undefined;\n        const droppedTaskId = parseInt(message);\n        if (isNaN(droppedTaskId))\n            return undefined;\n        return droppedTaskId;\n    }\n    setCategoryChangeCallback(callbackfn) {\n        this.catChangeCallback = callbackfn;\n    }\n    setInitializeTaskCallback(callbackfn) {\n        this.initNewTask = callbackfn;\n    }\n    setFinalizeTaskCallback(callbackfn) {\n        this.finalizeNewTask = callbackfn;\n    }\n    spawnNewTask(event) {\n        const task = this.initNewTask();\n        task.setName(\"New task!\");\n        task.setOrderIndex(this.getNextLastIndex());\n        task.setSection(this.category);\n        this.finalizeNewTask(task);\n    }\n    getNextLastIndex() {\n        const lastTaskId = this.elementOrder.back();\n        if (lastTaskId === undefined)\n            return 1;\n        else\n            return this.getTask(lastTaskId).getOrderIndex() + 1;\n    }\n    getIndexForDroppedTask(position) {\n        const iterator = this.elementOrder.iterate();\n        let lastIndex = 0;\n        while (iterator.hasNext()) {\n            const taskId = iterator.getNext();\n            const task = this.getTask(taskId);\n            const taskElement = this.getElementForTask(taskId);\n            const taskThreshold = ThresholdBox.fromElement(taskElement);\n            lastIndex = task.getOrderIndex();\n            if (taskThreshold.isAfter(position)) {\n                return lastIndex;\n            }\n        }\n        return lastIndex + 1;\n    }\n}\nTaskZone.contentsClass = \"decision_box_square_contents\";\nTaskZone.dropHighlightClass = \"highlight\";\n//# sourceMappingURL=task_zone.js.map","import { getElementById } from \"../common/common\";\nexport class GithubPageOpener {\n    constructor() {\n        this.button = this.getButton();\n    }\n    getButton() {\n        const element = getElementById(GithubPageOpener.buttonId);\n        element.addEventListener('click', ev => this.onClick());\n        return element;\n    }\n    onClick() {\n        var _a;\n        (_a = window.open(GithubPageOpener.sourceUrl, '_blank')) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n}\nGithubPageOpener.buttonId = \"get_code_button\";\nGithubPageOpener.sourceUrl = \"https://github.com/f3d0rov/planner\";\n//# sourceMappingURL=github_page_opener.js.map","import { getElementById } from \"../common/common\";\nclass StyleModeState {\n    constructor(buttonSymbolId, styleClassName) {\n        this.buttonSymbol = getElementById(buttonSymbolId);\n        this.styleClassName = styleClassName;\n    }\n    hideButtonSymbol() {\n        this.buttonSymbol.classList.add(StyleModeState.hiddenSymbolClass);\n    }\n    showButtonSymbol() {\n        this.buttonSymbol.classList.remove(StyleModeState.hiddenSymbolClass);\n    }\n    applyClassToBody() {\n        document.body.classList.add(this.styleClassName);\n        console.log(`Style class set to ${this.styleClassName}`);\n    }\n    removeClassFromBody() {\n        document.body.classList.remove(this.styleClassName);\n    }\n}\nStyleModeState.hiddenSymbolClass = \"nodisplay\";\nexport class StyleSwitcher {\n    constructor() {\n        this.styles = new Array;\n        this.currentStyleIndex = 0;\n        this.lastSwitchToken = 0;\n        this.switchStyleButton = this.setupStyleButton();\n        this.setDefaultStyles();\n        this.setStyle(0);\n    }\n    setupStyleButton() {\n        const button = getElementById(StyleSwitcher.switchStyleButtonId);\n        button.addEventListener('click', ev => this.setNextStyle());\n        return button;\n    }\n    setDefaultStyles() {\n        this.styles.push(new StyleModeState('dark_mode_button', 'dark_mode'));\n        this.styles.push(new StyleModeState('light_mode_button', 'light_mode'));\n    }\n    setNextStyle() {\n        this.setBodySwitchingStyleClass();\n        this.removeStyle(this.currentStyleIndex);\n        this.currentStyleIndex = this.getNextStyleIndex();\n        this.setStyle(this.currentStyleIndex);\n    }\n    getNextStyleIndex() {\n        return (this.currentStyleIndex + 1) % this.styles.length;\n    }\n    removeStyle(index) {\n        const style = this.styles.at(index);\n        style.removeClassFromBody();\n    }\n    setStyle(index) {\n        const style = this.styles.at(index);\n        style.applyClassToBody();\n        style.hideButtonSymbol();\n        const nextStyle = this.styles.at(this.getNextStyleIndex());\n        nextStyle.showButtonSymbol();\n    }\n    setBodySwitchingStyleClass() {\n        document.body.classList.add(StyleSwitcher.bodySwitchingStyle);\n        const token = Math.random();\n        this.lastSwitchToken = token;\n        setTimeout(() => this.resetBodySwitchingStyleClass(token), 1000 * StyleSwitcher.bodySwitchingStyleTimeSec);\n    }\n    resetBodySwitchingStyleClass(token) {\n        if (this.lastSwitchToken === token) {\n            document.body.classList.remove(StyleSwitcher.bodySwitchingStyle);\n        }\n    }\n}\nStyleSwitcher.switchStyleButtonId = \"switch_style_button\";\nStyleSwitcher.bodySwitchingStyle = \"switching_style\";\nStyleSwitcher.bodySwitchingStyleTimeSec = 1;\n//# sourceMappingURL=style_switcher.js.map","export class BasicTask {\n    constructor(name, section = \"unset\", index = 0) {\n        this.name = \"\";\n        this.section = \"unset\";\n        this.index = 0;\n        this.name = name;\n        this.section = section;\n        this.index = index;\n    }\n    getName() {\n        return this.name;\n    }\n    setName(name) {\n        this.name = name;\n    }\n    getSection() {\n        return this.section;\n    }\n    setSection(section) {\n        this.section = section;\n    }\n    getOrderIndex() {\n        return this.index;\n    }\n    setOrderIndex(index) {\n        this.index = index;\n    }\n}\n//# sourceMappingURL=basic_task.js.map","import { BasicTask } from \"./basic_task\";\nexport class BasicTaskProvider {\n    createNewTask() {\n        return new BasicTask(\"\", \"unset\");\n    }\n    restoreTasks() {\n        return this.getInitialTasks();\n    }\n    getInitialTasks() {\n        const tasks = new Array;\n        tasks.push(new BasicTask(\"Move tasks by dragging them with your mouse\", \"do\", 1));\n        tasks.push(new BasicTask(\"Create new tasks by moving the \\\"+\\\" button onto the board\", \"do\", 2));\n        tasks.push(new BasicTask(\"Complete tasks by moving them to the \\\"Done\\\" box\", \"schedule\", 1));\n        tasks.push(new BasicTask(\"Remove tasks by moving them to the \\\"Remove\\\" box\", \"delegate\", 1));\n        tasks.push(new BasicTask(\"Double-click a task to edit it\", \"delegate\", 2));\n        tasks.push(new BasicTask(\"Visit the project's repository by clicking the button at the top of the page\", \"delete\", 1));\n        return tasks;\n    }\n}\n//# sourceMappingURL=basic_task_provider.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { BasicTaskProvider } from \"./tasks/basic_task_provider\";\nimport { EisenhowerMatrixTaskEditor } from \"./eisenhower/eisenhower_matrix_task_editor\";\nimport { GithubPageOpener } from \"./misc/github_page_opener\";\nimport { StyleSwitcher } from \"./misc/style_switcher\";\nfunction main() {\n    logWelcomeMessage();\n    initMiscTools();\n    initTasks();\n}\nfunction logWelcomeMessage() {\n    console.log(\"%cPlanning Zen%c 1.0\", \"color:#8aee8a; font-size:32px;\", \"color: red;\");\n    console.log(\"Check out the source code, report issues and offer improvements at %chttps://github.com/f3d0rov/planner%c\", \"color:green;\");\n}\nfunction initMiscTools() {\n    const styleSwitcher = new StyleSwitcher;\n    const githubPageOpener = new GithubPageOpener();\n}\nfunction initTasks() {\n    const taskProvider = new BasicTaskProvider;\n    const app = new EisenhowerMatrixTaskEditor(taskProvider);\n}\nwindow.addEventListener('load', main);\n//# sourceMappingURL=main.js.map"],"names":[],"sourceRoot":""}